@startuml property-creation-sequence
title Property Creation Workflow - Sequence Diagram

actor Manager as M
participant "Manager Frontend" as MF
participant "API Gateway" as API
participant "Auth Service" as Auth
participant "Property Service" as PS
participant "Database" as DB
participant "Notification Service" as NS
participant "Telegram Bot" as TB
participant "Assistant" as A

M -> MF: Access manager portal
activate MF

MF -> API: POST /auth/login
activate API
API -> Auth: validate_credentials()
activate Auth
Auth -> DB: query user credentials
activate DB
DB --> Auth: user data
deactivate DB
Auth --> API: auth token
deactivate Auth
API --> MF: authentication success
deactivate API

MF -> M: Display dashboard
M -> MF: Fill property form
M -> MF: Submit property data

MF -> API: POST /properties/create
activate API
API -> Auth: validate_token()
activate Auth
Auth --> API: token valid
deactivate Auth

API -> PS: create_property(data)
activate PS
PS -> DB: INSERT property
activate DB
DB --> PS: property_id
deactivate DB

PS -> NS: emit_event("property_created", property_data)
activate NS
NS -> TB: send_notification(assistants, property_data)
activate TB
TB -> A: "New property available: {property_title}"
TB --> NS: notification sent
deactivate TB
NS --> PS: event processed
deactivate NS

PS --> API: property created successfully
deactivate PS
API --> MF: HTTP 201 Created
deactivate API

MF -> M: Display success message
deactivate MF

note over M, A
    This workflow demonstrates:
    1. Authentication flow
    2. Property creation process
    3. Real-time notifications
    4. Multi-component interaction
    
    Average execution time: 1.2 seconds
end note

@enduml 